; CLRREC.PO
;:
;		CLEARS INVTRX TO ONE CONTROL RECORD

RECORD INVTRX		;
		.INCLUDE 'DEF:RD143B.DEF'
RECORD BRACKS		;
		.INCLUDE 'DEF:RD143C.DEF'
RECORD
	SWITCH	,D1
	WRTCNT	,D5,	00001
	V	,D1
	READ	,D1,	0
	WRITE	,D1,	1
	LOKCTL	,D1
PROC 
	XCALL TERID (V)
	XCALL WATE (4,V)
	XCALL OUTPT (2,1,1,'CLEAR TRANSACTION FILE',1)
	XCALL FILES (3,'U',143,5)		;FILE # 143 -- PORTRX FILE
	LOKCTL = 1
	XCALL IO (3,INVTRX,1,READ,LOKCTL)
RITE,
	INCR WRTCNT
	LOKCTL = 1
	XCALL IO (3,BRACKS,WRTCNT,WRITE,LOKCTL)
	IF (WRTCNT.LT.REC143) GO TO RITE
	REC143 = 1
	ORG143 = 1
	DEL143 = 0
	LOKCTL = 1
	XCALL IO (3,INVTRX,1,WRITE,LOKCTL)
	XCALL FILES (3,'U',143,4)		;FILE # 143 -- PORTRX FILE
	XCALL PGCHN ('PO:POMENU',1)
END
