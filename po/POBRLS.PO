;POBRLS / POR  D11
;
;
;
RECORD HEADER	
	.INCLUDE 'DEF:RD151A.DEF'

RECORD CTL
	ROW	,D2
		,A1
	COL	,D2
		,A1
	MIN	,D2
		,A1
	MAX	,D2
		,A1
	TYPE	,D2

RECORD	POHEDR
	.INCLUDE 'DEF:RD151C.DEF'

RECORD
	LOKCTL	,D1
	SWITCH	,D1
	INXCTL	,D1
	CNGCTL	,D1
	WHATNO	,D2
	V	,D1
	READ	,D1,0
	WRITE	,D1,1
;;;	POHEDR	,A142
	OPT	,D1
	EXITSW	,D1
	UPDSW	,D1
	RESTRT	,D1
	BSMID	,D5
	SRCCTL	,D1
	SRCOPT	,D1
	PONUM	,D8
PROC
	XCALL TERID (V)
	V = 1
BEGIN,
	XCALL WATE (3,V)
	SWITCH = 1
	XCALL FILES (1,'SU',151,SWITCH)
	IF (SWITCH.EQ.9) GO TO INUSE1

	SWITCH = 1
	XCALL FILES (2,'SU',152,SWITCH)
	IF (SWITCH.EQ.9) GO TO INUSE2

	SWITCH = 1
	XCALL FILES (3,'U',153,SWITCH)
	IF (SWITCH.EQ.9) GO TO INUSE3

	SWITCH = 1
	XCALL FILES (4,'I',011,SWITCH)
	IF (SWITCH.EQ.9) GO TO INUSE4

	SWITCH = 1
	XCALL FILES (5,'I',012,SWITCH)
	IF (SWITCH.EQ.9) GO TO INUSE5

	SWITCH = 1
	XCALL FILES (6,'I',042,SWITCH)
	IF (SWITCH.EQ.9) GO TO INUSE6

	SWITCH = 1
	XCALL FILES (7,'I',041,SWITCH)
	IF (SWITCH.EQ.9) GO TO INUSE7

	SWITCH = 1
	XCALL FILES (8,'SI',061,SWITCH)
	IF (SWITCH.EQ.9) GO TO INUSE8

	SWITCH = 1
	XCALL FILES (9,'SU',192,SWITCH)
	IF (SWITCH.EQ.9) GO TO INUSE9

HDLOOP,
	EXITSW =
	OPT = 1
	XCALL SCRN2 (POHEDR,OPT,EXITSW)
	IF (EXITSW.EQ.1) GO TO END
LNLOOP,
	EXITSW = 2
	OPT = 1
	UPDSW = 1
	XCALL LINE2 (POHEDR,OPT,EXITSW,UPDSW)
	CALL REWRIT
	IF (EXITSW.EQ.1) GO TO HDLOOP
	GO TO LNLOOP
END,
	XCALL WATE (3,V)
	SWITCH = 4
	XCALL FILES (9,'SU',192,SWITCH)	
INUSE9,
	SWITCH = 4
	XCALL FILES (8,'SI',061,SWITCH)
INUSE8,
	SWITCH = 4
	XCALL FILES (7,'I',041,SWITCH)
INUSE7,
	SWITCH = 4
	XCALL FILES (6,'I',042,SWITCH)
INUSE6,
	SWITCH = 4
	XCALL FILES (5,'I',012,SWITCH)
INUSE5,
	SWITCH = 4
	XCALL FILES (4,'I',011,SWITCH)
INUSE4,
	SWITCH = 4
	XCALL FILES (3,'U',153,SWITCH)
INUSE3,
	SWITCH = 4
	XCALL FILES (2,'SU',152,SWITCH)
INUSE2,
	SWITCH = 4
	XCALL FILES (1,'SU',151,SWITCH)
INUSE1,
	RESTRT = 1
	XCALL PGCHN ('PO:POENMN',RESTRT)

;**********************************************************************

REWRIT,
	HEADER = POHEDR
	PONUM (1,6) = HPONUM
	PONUM (7,8) = HRLNUM
	LOKCTL = 1
	XCALL ISIO (1,HEADER,PONUM,READ,LOKCTL)
	HEADER = POHEDR
	IF (LOKCTL.NE.0) RETURN
	LOKCTL = 1
	XCALL ISIO (1,HEADER,PORKEY,WRITE,LOKCTL)
	RETURN

;**********************************************************************

END

