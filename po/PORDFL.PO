; PORDFL / POR - D11
;
; REVISIONS:
;
;
;		CHANGE/INQUIRE PURCHASE ORDER DEFAULT VALUES.
;
RECORD DUMTBL
	.INCLUDE 'DEF:RD153B.DEF'

RECORD
	LOKCTL	,D1
	ENTRY	,A6
	SWITCH	,D1
	INXCTL	,D1
	CNGCTL	,D1
	NOABRT	,D1,	1
	WHATNO	,D2
	V	,D1
	READ	,D1, 0
	WRITE	,D1, 1

RECORD CTL
	ROW	,D2
		,A1
	COL	,D2
		,A1
	MAX	,D2
		,A1
	MIN	,D2
		,A1
	TYPE	,A2


PROC
	XCALL TERID (V)
	V = 1

	SWITCH = 1				;(01)
	XCALL FILES (3,'U',153,SWITCH)		; PORTBL
	IF (SWITCH.EQ.9) GO TO INUSE1

	LOKCTL = 0
	XCALL IO (3,DUMTBL,1,READ,LOKCTL)
	IF (LOKCTL.EQ.1) GO TO EXIT

BEGIN,
	XCALL OUTPT (0,0,3,'CHANGE/INQUIRE PURCHASE ORDER DEFAULTS',V)
	XCALL OUTPT (6,13,0,
&	'PLEASE ENTER DEFAULT VALUES FOR THE FOLLOWING FIELDS:',V)
	XCALL OUTPT ( 8,25,0,'1. STARTING P/O NUMBER',V)
	XCALL OUTPT (10,25,0,'2. STARTING MARTY #',V)
	XCALL DSPLY (6,08,49,NPONUM,1,V)
	XCALL DSPLY (6,10,49,MPONUM,1,V)
	GO TO ANYCNG
PONUM,
	CTL = '08,49,06,01,# '
	CALL INPUT
	GO TO (BEGIN),INXCTL
	NPONUM = ENTRY
	XCALL DSPLY (6,08,49,NPONUM,1,V)
	NPONUM = NPONUM - 1
	GO TO (ANYCNG),CNGCTL
MARTY,
	CTL = '10,49,06,01,# '
	CALL INPUT
	GO TO (BEGIN),INXCTL
	MPONUM = ENTRY
	XCALL DSPLY (6,10,49,MPONUM,1,V)
	MPONUM = MPONUM - 1
	GO TO ANYCNG
ANYCNG,
	CNGCTL = 6
	XCALL ANYCN (CNGCTL,WHATNO)
	GO TO (WRIT,WRIT,BRANCH),CNGCTL + 2
BADCHA,
	CNGCTL = 3
	GO TO ANYCNG
BRANCH,
	GO TO (PONUM,MARTY),WHATNO
	GO TO BADCHA
;**********************************************************************
WRIT,
	LOKCTL = NOABRT
	XCALL IO (3,DUMTBL,1,WRITE,LOKCTL)
	GO TO EXIT
;**********************************************************************
INPUT,
	XCALL INPUT (ROW,COL,MAX,MIN,TYPE,ENTRY,INXCTL,V)
	RETURN
;**********************************************************************
EXIT,
	XCALL FILES (3,'U',153,4)
INUSE1,
	XCALL PGCHN ('PO:POSFMN',1)
;**********************************************************************

END

