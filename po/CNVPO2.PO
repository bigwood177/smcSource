;  CNVPO2 / PO - D11
;
;		CREATED:  27-SEP-95
;		AUTHOR:   DIANA K. SCHEPPA
;***********************************************************************
;		PROGRAM TO CONVERT THE PURCHASE ORDER HEADER FILE FROM A
;		SEQUENTIAL FILE TO AN ISAM FILE.
;
;		RECORD LENGTH:  142
;
;
RECORD PORHDR
	.INCLUDE 'DEF:RD151A.DEF'

RECORD
	BLANKS	,A5
	SWITCH	,D1,1
	CNGCTL	,D1
	NEWSIZ	,D4
	ENTRY	,A6
	INXCTL	,D1
	MAXREC	,D5
	V	,D1
	READ	,D1,	0
	LOKCTL	,D1
	KEY	,A4
	SRCCTL	,D1
	BSMID	,D5
	VREC	,D5
	STORE	,D1,	3
	

PROC
	XCALL TERID (V)
	V = 1
BEGIN,
	CNGCTL =
	XCALL OUTPT(01,01,3,'ADD HEADER RECORD TO ISAM FILE PORHDR',V)
	XCALL OUTPT(12,17,2,'ARE YOU SURE YOU WISH TO RUN THIS PROGRAM ?',V)
	XCALL INPUT(12,62,01,01,'YN',ENTRY,INXCTL,V)
	GO TO (END), INXCTL-1
PROCES,
	XCALL WAIT (4,V)
;;	OPEN (1,I,'TST:PORHDR.TST')
	OPEN (1,I,'DPO:PORHDR.153')
	SWITCH = 1
	XCALL FILES (2,'SU',151,SWITCH)
	READS (1,PORHDR,EOF1)
	IF (PORHDR.EQ.']]]]]]') GOTO EOF1
	VREC = 1
ADDREC,
	LOKCTL = 1
	XCALL ISIO (2,PORHDR,PORKEY,STORE,LOKCTL)
	IF (LOKCTL.NE.0) XCALL MESAG (PORHDR,1)
EOF1,
	OFF ERROR
	CLOSE 1
	XCALL FILES (2,'SU',151,4)
END,
	CLOSE 15
	XCALL PGMND
	STOP

END

