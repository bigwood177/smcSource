;  CNVPOL / PO - D11
;
;		CREATED:  29-SEP-95
;		AUTHOR:   DIANA K. SCHEPPA
;**********************************************************************
;		PROGRAM TO CONVERT THE PURCHASE ORDER LINE FILE FROM A
;		SEQUENTIAL FILE TO AN ISAM FILE. 
;
;		RECORD LENGTH:   254
;
;
RECORD PORLIN
	.INCLUDE 'DEF:RD152A.DEF'

RECORD
	BLANKS	,A5
	SWITCH	,D1,1
	CNGCTL	,D1
	NEWSIZ	,D4
	ENTRY	,A6
	INXCTL	,D1
	MAXREC	,D5
	V	,D1
	READ	,D1,	0
	LOKCTL	,D1
	KEY	,A4
	SRCCTL	,D1
	BSMID	,D5
	VREC	,D5
	STORE	,D1,	3
	

PROC
	XCALL TERID (V)
	V = 1
BEGIN,
	CNGCTL =
	XCALL OUTPT(01,01,3,'CONVERT PORLIN FILE TO AN ISAM LAYOUT',V)
	XCALL OUTPT(12,17,2,'ARE YOU SURE YOU WISH TO RUN THIS PROGRAM ?',V)
	XCALL INPUT(12,62,01,01,'YN',ENTRY,INXCTL,V)
	GO TO (END), INXCTL-1
PROCES,
	XCALL WAIT (4,V)
;;	OPEN (1,I,'TST:PORLIN.TST')
	OPEN (1,I,'DPO:PORLIN.NUA')
	SWITCH = 1
	XCALL FILES (2,'SU',152,SWITCH)
;;	VREC = 1
;;	READS (1,PORLIN,EOF1)			;HEADER RECORD (SKIP)
NXTVEN,
	READS (1,PORLIN,EOF1)
	IF (PORLIN.EQ.']]]]]]') GO TO EOF1
	INCR VREC
	XCALL OUTPT (22,5,0,VREC,V)
ADDREC,
	LOKCTL = 1
	XCALL ISIO (2,PORLIN,POLKEY,STORE,LOKCTL)
	IF (LOKCTL.NE.0) XCALL MESAG (PORLIN,1)
	GO TO NXTVEN
EOF1,
	OFF ERROR
	CLOSE 1
	XCALL FILES (2,'SU',152,4)
END,
	CLOSE 15
	XCALL PGMND
	STOP

END

